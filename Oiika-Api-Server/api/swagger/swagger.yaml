swagger: "2.0"
info:
  version: "0.0.1"
  title: Hello World App
# during dev, should point to your local machine
host: localhost:10010
# basePath prefixes all resource paths
basePath: /
#
schemes:
  # tip: remove http to make production-grade
  - http
  - https
# format of bodies a client can send (Content-Type)
consumes:
  - application/json
# format of the responses to the client (Accepts)
produces:
  - application/json
paths:

# LOGIN

  '/login':
    x-swagger-router-controller: login
    post:
      description: login local user
      operationId: loginLocal
      tags:
        - login
      parameters:
          - name: login
            in: body
            required: true
            schema:
              properties:
                email:
                  type: string
                password:
                  type: string
              required:
                - email
                - password
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  '/login/facebook':
    x-swagger-router-controller: login
    post:
      description: login facebook user
      operationId: loginFacebook
      tags:
        - login
      parameters:
          - name: login
            in: body
            required: true
            schema:
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                facebook_id:
                  type: string
                gender:
                  type: string
                profile_picture:
                  type: string
              required:
                - first_name
                - last_name
                - email
                - facebook_id
                - gender
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  '/login/google':
    x-swagger-router-controller: login
    post:
      description: login google user
      operationId: loginGoogle
      tags:
        - login
      parameters:
          - name: login
            in: body
            required: true
            schema:
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                google_id:
                  type: string
                gender:
                  type: string
                profile_picture:
                  type: string
              required:
                - first_name
                - last_name
                - email
                - google_id
                - gender
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"


# SIGNUP

  '/signup':
    x-swagger-router-controller: signup
    post:
      description: signup local user
      operationId: signupLocal
      tags:
        - signup
      parameters:
          - name: signup
            in: body
            required: true
            schema:
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                gender:
                  type: string
                password:
                  type: string
                user_type:
                  type: string
              required:
                - first_name
                - last_name
                - email
                - gender
                - password
                - user_type
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  '/signup/facebook':
    x-swagger-router-controller: signup
    post:
      description: signup facebook user
      operationId: signupFacebook
      tags:
        - signup
      parameters:
          - name: signup
            in: body
            required: true
            schema:
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                facebook_id:
                  type: string
                gender:
                  type: string
                profile_picture:
                  type: string
                user_type:
                  type: string
              required:
                - first_name
                - last_name
                - email
                - facebook_id
                - gender
                - user_type
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  '/signup/google':
    x-swagger-router-controller: signup
    post:
      description: signup google user
      operationId: signupGoogle
      tags:
        - signup
      parameters:
          - name: signup
            in: body
            required: true
            schema:
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                google_id:
                  type: string
                gender:
                  type: string
                profile_picture:
                  type: string
                user_type:
                  type: string
              required:
                - first_name
                - last_name
                - email
                - google_id
                - gender
                - user_type
      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"


# SEARCH

  # GET search tutors based on GPS co-ordinates
  '/search':
    x-swagger-router-controller: search
    get:
      description: Get tutors by location
      operationId: getTutorsByLocation
      tags:
        - Tutor
      parameters:
          - name: sw_lat
            in: query
            description: SouthWest latitude of location
            required: true
            type: string
          - name: sw_lng
            in: query
            description: SouthWest longitude of location
            required: true
            type: string
          - name: ne_lat
            in: query
            description: NorthEast latitude of location
            required: true
            type: number
          - name: ne_lng
            in: query
            description: NorthEast longitude of location
            required: true
            type: number
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

# TUTOR

  # Create tutor profile - POST - deprecated (integrated within signup.)
  '/tutor':
    x-swagger-router-controller: tutor
    get:
      description: Get tutors by parameter
      operationId: getTutorsByParameter
      tags:
        - Tutor
      parameters:
          -
            name: city
            in: query
            description: city of tutors
            required: false
            type: string
          -
            name: email
            in: query
            description: tutor with email
            required: false
            type: string
          -
            name: lat
            in: query
            description: latitude of location (coupled with longitude)
            required: false
            type: number
          -
            name: lng
            in: query
            description: longitude of location (coupled with latitude)
            required: false
            type: number
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"
    post:
      description: create new tutor
      operationId: createTutor
      tags:
        - Tutor
      parameters:
          - name: tutor
            in: body
            required: true
            schema:
              properties:
                first_name:
                  type: string
                last_name:
                  type: string
                email:
                  type: string
                short_description:
                  type: string
                full_description:
                  type: string
                city:
                  type: string
                hourly_rate:
                  type: number
                location_lat:
                  type: number
                location_lng:
                  type: number
                travel_distance:
                  type: number
                hours_worked:
                  type: number
                rating:
                  type: number
                skills:
                  type: array
                  items:
                    type: string
                profile_picture:
                  type: string
              required:
                - first_name
                - last_name
                - email

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"

  # Get tutor profile info - GET
  '/tutor/{accountId}':
    x-swagger-router-controller: tutor
    get:
      description: get tutor profile information
      operationId: getTutorByAccountId
      tags:
        - Tutor
      parameters:
          -
            name: accountId
            in: path
            required: true
            type: string
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # Get tutor reviews - GET
  '/tutor/{accountId}/reviews':
    x-swagger-router-controller: tutor
    get:
      description: get tutor reviews
      operationId: getTutorReviewsByAccountId
      tags:
        - Tutor
      parameters:
          -
            name: accountId
            in: path
            required: true
            type: string
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # Get tutor schedule - GET
  '/tutor/{accountId}/schedule':
    x-swagger-router-controller: tutor
    get:
      description: get tutor schedule returned in a JSON object with days arrays
      operationId: getTutorScheduleByAccountId
      tags:
        - Tutor
      parameters:
          -
            name: accountId
            in: path
            required: true
            type: string
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # Update tutor schedule - PUT
  '/tutor/schedule':
    x-swagger-router-controller: tutor
    put:
      description: update tutor schedule
      operationId: updateTutorSchedule
      tags:
        - Tutor
      parameters:
          - name: schedule
            in: body
            required: true
            schema:
              properties:
                tutorId:
                  type: string
                  description: account id of tutor
                schedule:
                  type: object
                  description: object of schedules
                  required:
                  - "0"
                  - "1"
                  - "2"
                  - "3"
                  - "4"
                  - "5"
                  - "6"
                  properties:
                    0:
                      type: array
                      items:
                        type: string
                    1:
                      type: array
                      items:
                        type: string
                    2:
                      type: array
                      items:
                        type: string
                    3:
                      type: array
                      items:
                        type: string
                    4:
                      type: array
                      items:
                        type: string
                    5:
                      type: array
                      items:
                        type: string
                    6:
                      type: array
                      items:
                        type: string
              required:
                - tutorId
                - schedule
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # Update tutor location - PUT
  '/tutor/update-location':
    x-swagger-router-controller: tutor
    put:
      description: update tutor location
      operationId: updateTutorLocation
      tags:
        - Tutor
      parameters:
          - name: location
            in: body
            required: true
            schema:
              properties:
                tutorId:
                  type: string
                  description: account id of tutor
                location:
                  type: object
                  description: object of location
                  required:
                  - lat
                  - lng
                  properties:
                    lat:
                      type: number
                    lng:
                      type: number
              required:
                - tutorId
                - location
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # Update tutor schedule exceptions - POST
  '/tutor/schedule-exceptions':
    x-swagger-router-controller: schedules
    post:
      description: update tutor schedule exceptions
      operationId: updateScheduleExceptions
      tags:
        - Tutor
      parameters:
          - name: scheduleExceptions
            in: body
            required: true
            schema:
              properties:
                tutorId:
                  type: string
                  description: account id of tutor
                exceptions:
                  type: object
                  description: object of schedules
                  required:
                  - date
                  - duration
                  properties:
                    date:
                      type: string
                      description: beginning datetime of exception
                    duration:
                      type: number
                      description: duration of exception in 30 min intervals
              required:
                - tutorId
                - exceptions
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

# TUTEE

  # POST a new review created by a tutee
  '/tutee/review':
    x-swagger-router-controller: reviews
    post:
      description: Get sessions belonging to tutor email.
      operationId: createReview
      tags:
        - Session
      parameters:
          - name: schedule
            in: body
            required: true
            schema:
              properties:
                tutorId:
                  type: string
                  description: account id of tutor
                schedule:
                  type: object
                  description: object of schedules
                  required:
                  - "0"
                  - "1"
                  - "2"
                  - "3"
                  - "4"
                  - "5"
                  - "6"
                  properties:
                    0:
                      type: array
                      items:
                        type: string
                    1:
                      type: array
                      items:
                        type: string
                    2:
                      type: array
                      items:
                        type: string
                    3:
                      type: array
                      items:
                        type: string
                    4:
                      type: array
                      items:
                        type: string
                    5:
                      type: array
                      items:
                        type: string
                    6:
                      type: array
                      items:
                        type: string
              required:
                - tutorId
                - schedule
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # GET all tutee sessions by account ID
  '/tutee/{accountId}/sessions':
    x-swagger-router-controller: session
    get:
      description: Get sessions belonging to tutee email.
      operationId: getTuteeSessionsByAccountId
      tags:
        - Session
      parameters:
          - name: accountId
            in: path
            description: account ID of tutee
            required: true
            type: string
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"

  # POST a new session created by a tutee
  '/tutee/session':
    x-swagger-router-controller: session
    post:
      description: create new session
      operationId: createSession
      tags:
        - Session
      parameters:
          - name: session
            in: body
            required: true
            schema:
              properties:
                tuteeId:
                  type: string
                  description: account id of tutee
                session:
                  type: object
                  description: object of schedules
                  required:
                  - tutorId
                  - date
                  - duration
                  properties:
                    tutorId:
                      type: string
                      description: account id of tutor
                    date:
                      type: string
                      description: date time of session
                    duration:
                      type: number
                      description: duration of session in 30 minute intervals
              required:
                - tuteeId
                - session

      responses:
        "200":
          description: Success
          schema:
            $ref: "#/definitions/HelloWorldResponse"
        default:
          description: Error
          schema:
            $ref: "#/definitions/ErrorResponse"


# TUTOR SESSION

  '/session/tutor':
    x-swagger-router-controller: session
    get:
      description: Get sessions belonging to tutor email.
      operationId: getTutorSessionByEmail
      tags:
        - Session
      parameters:
          -
            name: email
            in: query
            description: sessions for tutors
            required: true
            type: string
      responses:
          "200":
            description: Success
            schema:
              $ref: "#/definitions/HelloWorldResponse"
          default:
            description: Error
            schema:
              $ref: "#/definitions/ErrorResponse"


  /swagger:
    x-swagger-pipe: swagger_raw
# complex objects have schema definitions
definitions:
  HelloWorldResponse:
    required:
      - message
    properties:
      message:
        type: string
  ErrorResponse:
    required:
      - message
    properties:
      message:
        type: string
